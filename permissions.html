<html>
  <head>
    <style>body{background-color:#2c2f33;}.app{margin-left:100px;margin-right:100px;margin-top:100px;}label,h2{font-family:sans-serif;color:#9e9e9e;}.permGroup{float:left;}li{margin-top:5px;}</style>
    <script>
      function main() {
        console.log(0);
        val = document.getElementById("intInput").value;
        var groups = document.getElementsByClassName("permGroup");
        var newGroups = []
        for (i = 0; i < 3; i++) {
          newGroups[i] = groups[i].childNodes[3];
        }
        Array.prototype.forEach.call(newGroups, list => {
          for (x = 1; x < list.childNodes.length; x += 2) {
            perm = list.childNodes[x];
            perm = perm.childNodes[0].childNodes[0];
            i = perm.getAttribute("val");
            i = parseInt(i, 16);
            console.log(val, i);
            if (val & i != 0) {
              perm.checked = true;
            } else {
              perm.checked = false;
            }
          }
        })
      }
      function getCurrent() {
        var groups = document.getElementsByClassName("permGroup");
        var newGroups = [];
        for (i = 0; i < 3; i++) {
          newGroups[i] = groups[i].childNodes[3];
        }
        var totalPerms = 0;
        Array.prototype.forEach.call(newGroups, list => {
          for (x = 1; x < list.childNodes.length; x += 2) {
            perm = list.childNodes[x];
            perm = perm.childNodes[0].childNodes[0];
            if (perm.checked) {
              i = perm.getAttribute("val");
              i = parseInt(i, 16);
              totalPerms += i;
            }
          }
        })
        input = document.getElementById("intInput");
        input.value = totalPerms;
      }
      function on_load() {
        var params = {};
        window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
          params[key] = value;
        });
        if ("perms" in params) {
          perm = params["perms"];
          input = document.getElementById("intInput");
          input.value = perm;
          main();
          console.log(perm);
        }
        document.getElementById("go").addEventListener("keypress", function(event) {document.getElementById("intInput").click();});
      }
    </script>
    <title>Discord Permissions Integers</title>
  </head>
  <body onload="on_load()">
    <div class="app">
      <input id="intInput" class="intInput" type="number" placeholder="integer...">
      <button id="go" class="go" type="button" onclick="main()">Go</button>
      <div class="types">
        <div class="permGroup">
          <h2>General Permissions</h2>
          <ul style="list-style:none;">
            <li><label><input onclick="getCurrent()" type="checkbox" id="administrator" val="8">Administrator</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="view_audit_log" val="80">View Audit Log</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_guild" val="20">Manage Server</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_roles" val="10000000">Manage Roles</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_channels" val="10">Manage Channels</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="kick_members" val="2">Kick Members</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="ban_members" val="4">Ban Members</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="create_instant_invite" val="1">Create Invite</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="change_nickname" val="4000000">Change Nickname</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_nicknames" val="8000000">Manage Nicknames</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_emojis" val="40000000">Manage Emojis</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_webhooks" val="20000000">Manage Webhooks</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="view_channel" val="400">Read Text Channels & See Voice Channels</label></li>
          </ul>
        </div>
        <div class="permGroup">
          <h2>Text Permissions</h2>
          <ul style="list-style:none;">
            <li><label><input onclick="getCurrent()" type="checkbox" id="send_messages" val="800">Send Messages</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="send_tts_messages" val="1000">Send TTS Messages</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="manage_messages" val="2000">Manage Messages</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="embed_links" val="4000">Embed Links</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="attach_files" val="8000">Attach Files</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="read_message_history" val="10000">Read Message History</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="mention_everyone" val="20000">Mention Everyone</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="use_external_emojis" val="40000">Use External Emojis</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="add_reactions" val="40">Add Reactions</label></li>
          </ul>
        </div>
        <div class="permGroup">
          <h2>Voice Permissions</h2>
          <ul style="list-style:none;">
            <li><label><input onclick="getCurrent()" type="checkbox" id="connect" val="100000">Connect</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="speak" val="200000">Speak</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="mute_members" val="400000">Mute Members</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="deafen_members" val="800000">Deafen Members</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="move_members" val="1000000">Move Members</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="use_vad" val="2000000">Use Voice Activity</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="priority_speaker" val="100">Priority Speaker</label></li>
            <li><label><input onclick="getCurrent()" type="checkbox" id="stream" val="200">Go Live</label></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
